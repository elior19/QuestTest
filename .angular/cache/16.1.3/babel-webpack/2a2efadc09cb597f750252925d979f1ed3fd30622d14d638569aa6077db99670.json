{"ast":null,"code":"import { Store } from '@ngrx/store';\nimport { SetFlights, SetWorkers } from '../store/actions';\nimport { Worker } from '../models/worker';\nimport { Flight } from '../models/flight';\nimport { FlightInformation } from '../models/flightInformation';\nimport { HttpClient } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"@angular/common/http\";\nexport let DataReceiverService = /*#__PURE__*/(() => {\n  class DataReceiverService {\n    constructor(_store, _http) {\n      this._store = _store;\n      this._http = _http;\n      this.getWorkers();\n      this.getFlightsByWorkerId(1);\n    }\n    getWorkers() {\n      // cycle\n      // get data\n      let workers = []; //Workers;\n      this._http.get('http://localhost:3000/workers').subscribe(response => {\n        console.log(response);\n        response.forEach(worker => {\n          workers.push(new Worker().setJson());\n        });\n        this._store.dispatch(new SetWorkers({\n          workers\n        }));\n      });\n      // console.log(a);\n      // add to store\n    }\n\n    getFlightsByWorkerId(workerId) {\n      // delete old interval\n      // create new interval\n      // add to store\n      let flights = Flights;\n      this._store.dispatch(new SetFlights({\n        flights\n      }));\n    }\n  }\n  DataReceiverService.ɵfac = function DataReceiverService_Factory(t) {\n    return new (t || DataReceiverService)(i0.ɵɵinject(i1.Store), i0.ɵɵinject(i2.HttpClient));\n  };\n  DataReceiverService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: DataReceiverService,\n    factory: DataReceiverService.ɵfac,\n    providedIn: 'root'\n  });\n  return DataReceiverService;\n})();\nconst Workers = [new Worker(1, 'a'), new Worker(2, 'b'), new Worker(3, 'c'), new Worker(4, 'd'), new Worker(5, 'e')];\nconst Flights = [new Flight('1A', 'Israel', new Date(2013, 12, 5), 'USA', new Date(2013, 12, 5), new FlightInformation('A38', 350, 35, 10)), new Flight('1A', 'Israel', new Date(2013, 12, 5), 'USA', new Date(2013, 12, 5), new FlightInformation('A38', 350, 35, 10)), new Flight('1A', 'Israel', new Date(2013, 12, 5), 'USA', new Date(2013, 12, 5), new FlightInformation('A38', 350, 35, 10)), new Flight('1A', 'Israel', new Date(2013, 12, 5), 'USA', new Date(2013, 12, 5), new FlightInformation('A38', 350, 35, 10))];","map":{"version":3,"names":["Store","SetFlights","SetWorkers","Worker","Flight","FlightInformation","HttpClient","DataReceiverService","constructor","_store","_http","getWorkers","getFlightsByWorkerId","workers","get","subscribe","response","console","log","forEach","worker","push","setJson","dispatch","workerId","flights","Flights","i0","ɵɵinject","i1","i2","factory","ɵfac","providedIn","Workers","Date"],"sources":["C:\\Users\\elior\\WebstormProjects\\quest\\src\\app\\services\\data-receiver.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport {Store} from '@ngrx/store';\nimport {SetFlights, SetWorkers} from '../store/actions';\nimport {Worker} from '../models/worker';\nimport {Flight} from '../models/flight';\nimport {FlightInformation} from '../models/flightInformation';\nimport {HttpClient} from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError, retry } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DataReceiverService {\n\n  constructor(private _store: Store<{workers: Worker[]}>, private _http: HttpClient) {\n    this.getWorkers();\n    this.getFlightsByWorkerId(1);\n  }\n\n  getWorkers() {\n    // cycle\n    // get data\n    let workers: Worker[] = []; //Workers;\n    this._http.get<any>('http://localhost:3000/workers').subscribe((response: any[]) => {\n      console.log(response);\n      response.forEach((worker: any) => {\n        workers.push(new Worker().setJson())\n      });\n      this._store.dispatch(new SetWorkers({workers}));\n    });\n    // console.log(a);\n    // add to store\n\n  }\n\n  getFlightsByWorkerId(workerId: number) {\n    // delete old interval\n    // create new interval\n    // add to store\n    let flights: Flight[] = Flights;\n    this._store.dispatch(new SetFlights({flights}));\n  }\n}\n\nconst Workers: Worker[] = [\n  new Worker(1, 'a'),\n  new Worker(2, 'b'),\n  new Worker(3, 'c'),\n  new Worker(4, 'd'),\n  new Worker(5, 'e')\n];\n\nconst Flights: Flight[] = [\n  new Flight('1A',\n    'Israel',\n    new Date(2013, 12, 5),\n    'USA',\n    new Date(2013, 12, 5),\n    new FlightInformation('A38', 350, 35, 10)),\n\n  new Flight('1A',\n    'Israel',\n    new Date(2013, 12, 5),\n    'USA',\n    new Date(2013, 12, 5),\n    new FlightInformation('A38', 350, 35, 10)),\n\n  new Flight('1A',\n    'Israel',\n    new Date(2013, 12, 5),\n    'USA',\n    new Date(2013, 12, 5),\n    new FlightInformation('A38', 350, 35, 10)),\n\n  new Flight('1A',\n    'Israel',\n    new Date(2013, 12, 5),\n    'USA',\n    new Date(2013, 12, 5),\n    new FlightInformation('A38', 350, 35, 10)),\n\n];\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}